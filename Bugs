install.packages("tigris")
install.packages("tidyverse")
install.packages("tmap")
install.packages("maptools")
install.packages("censusapi")
library(censusapi)
library(maptools)
library(tmap)
library(tidyverse)
library(tigris)
chi_counties <- c("LA")

#Using the censuapi we select orange county for our spatial file 
chi_tracts <- tracts(state = "CA", county = chi_counties, 
                     cb = TRUE)

data_from_api <- getCensus(name = "acs5",key = "ff74939dad01aa15ca91bb0672e47ce420557636", vintage = 2015, vars = "B18135_032E", region = "tract:*", regionin = "state:06")


values <- data_from_api %>%
  transmute(GEOID = paste0(state, county, tract), 
            value = B18135_032E)

?transmute


chi_joined = geo_join(chi_tracts, values, by = "GEOID")

#Here I have tried to replace the projection code with a character string that was returned by the get_projection function below. This seemed like it may work based on the tm_shape documentation but hasnt panned out. 
library(tmap)
tm_shape(chi_joined, project="+proj=longlat+datum=NAD83+no_defs+ellps=GRS80+towgs84=0,0,0") +
  tm_fill("value", style = "quantile", n = 7, palette = "Greens", 
          title = "Median Home Values in LA County") + 
  tm_legend(bg.color = "white", bg.alpha = 0.6) + 
  tm_style_gray()

Error in CRS(y, doCheckCRSArgs = check_args) : unknown projection id


?tm_shape

install.packages("tmaptools")
library(tmaptools)
get_projection(chi_tracts, as.CRS = FALSE, guess.longlat = FALSE)
get_proj4("+proj=longlat+datum=NAD83+no_defs+ellps=GRS80+towgs84=0,0,0", as.CRS = TRUE)
CRS("+proj=longlat+datum=NAD83+no_defs+ellps=GRS80+towgs84=0,0,0", doCheckCRSArgs=TRUE)

